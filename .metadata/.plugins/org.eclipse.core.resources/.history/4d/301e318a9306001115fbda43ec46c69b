//package com.bankapp.service;
//
//import java.math.BigDecimal;
//import java.util.List;
//
//import org.springframework.stereotype.Service;
//
//import com.bankapp.dto.CreateAccountRequest;
//import com.bankapp.dto.DepositRequestDto;
//import com.bankapp.dto.TransferRequestDto;
//import com.bankapp.dto.WithdrawRequestDto;
//import com.bankapp.entities.Account;
//import com.bankapp.exceptions.BankAccountNotFoundException;
//import com.bankapp.repo.BankRepo;
//import com.bankapp.util.AccountConverter;
//
//import jakarta.transaction.Transactional;
//
//@Service
//@Transactional
//public class BankService {
//	private BankRepo bankRepo;
//
////	@Autowired
//	public BankService(BankRepo bankRepo) {
//		this.bankRepo = bankRepo;
//	}
//
//	public CreateAccountRequest createAccount(CreateAccountRequest accountDto) {
//		Account account = bankRepo.save(AccountConverter.convertToAccount(accountDto));
//		return AccountConverter.convertToAccountDto(account);
//	}
//
//	public CreateAccountRequest updateAccount(String id, CreateAccountRequest accountDto) {
//		CreateAccountRequest accountDtoToUpdate = getById(id);
//		if (accountDtoToUpdate == null)
//			throw new BankAccountNotFoundException("not found" + id);
//		accountDtoToUpdate.setName(accountDto.getName());
//		Account accountUpdated = bankRepo.save(AccountConverter.convertToAccount(accountDtoToUpdate));
//		return AccountConverter.convertToAccountDto(accountUpdated);
//	}
//
//	public void deleteAccount(String id) {
//		CreateAccountRequest accountDtoToDelete = getById(id);
//		if (accountDtoToDelete == null)
//			throw new BankAccountNotFoundException("account not found, id: " + id);
//		bankRepo.delete(AccountConverter.convertToAccount(accountDtoToDelete));
//	}
//
//	public List<CreateAccountRequest> getAllAccount() {
//		List<CreateAccountRequest> accounts = bankRepo.findAll().stream().map(AccountConverter::convertToAccountDto).toList();
//		return accounts;
//	}
//
//	public CreateAccountRequest getById(String id) {
//		Account account = bankRepo.findById(id)
//				.orElseThrow(() -> new BankAccountNotFoundException("account not found, id: " + id));
//		return AccountConverter.convertToAccountDto(account);
//	}
//
//	public BigDecimal getBalance(String id) {
//		CreateAccountRequest accountDto = getById(id);
//		return accountDto.getBalance();
//	}
//
//	public BigDecimal deposit(DepositRequestDto depositRequestDto) {
//		System.out.println("-------------------------");
//		System.out.println(depositRequestDto.getAccountId());
//		System.out.println("-------------------------");
//
//		CreateAccountRequest accountDto = getById(depositRequestDto.getAccountId());
//		Account account = AccountConverter.convertToAccount(accountDto);
//		account.setBalance(account.getBalance().add(depositRequestDto.getAmount()));
//		bankRepo.save(account);
//		return account.getBalance();
//	}
//
//	public BigDecimal withdraw(WithdrawRequestDto withdrawRequestDto) {
//		Account account = AccountConverter.convertToAccount(getById(withdrawRequestDto.getAccountId()));
//		if (account.getBalance().compareTo(withdrawRequestDto.getAmount()) < 0) {
//			throw new IllegalArgumentException("Insufficient balance for withdrawal");
//		}
//		account.setBalance(account.getBalance().subtract(withdrawRequestDto.getAmount()));
//		bankRepo.save(account);
//		return account.getBalance();
//	}
//
//	public void transfer(TransferRequestDto transferRequestDto) {
//		if (transferRequestDto.getReceiverAccountId().equals(transferRequestDto.getSenderAccountId())) {
//			throw new IllegalArgumentException("Source and target accounts cannot be the same");
//		}
//
//		Account senderAccount = AccountConverter.convertToAccount(getById(transferRequestDto.getSenderAccountId()));
//		Account receiverAccount = AccountConverter.convertToAccount(getById(transferRequestDto.getReceiverAccountId()));
//
//		senderAccount.setBalance(senderAccount.getBalance().subtract(transferRequestDto.getAmount()));
//		receiverAccount.setBalance(receiverAccount.getBalance().add(transferRequestDto.getAmount()));
//		bankRepo.save(senderAccount);
//		bankRepo.save(receiverAccount);
//	}
//}
